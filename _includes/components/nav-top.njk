

<nav class="navlist">
  {% set navPages = collections.all | eleventyNavigation %}

  {% macro renderNavListItem(entry) %}
    <li{% if entry.url == page.url %} class="active-class"{% endif %}>
      <a href="{{ entry.url }}" title="{{ entry.title }}" alt="{{ entry.title }}">{{ entry.title }}</a>
      {% if entry.children.length %}
        <ul class="second-level">
          {% for child in entry.children %}
            {{ renderNavListItem(child) }}
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endmacro %}

  <ul class="main-menu">
    {% for entry in navPages %}
      {% if entry.url == "/pages/recipes/main-ingredients/" %}
        {{ renderNavListItem(entry) }}
        <li>
          <a href="/pages/recipes/vegetarian/" title="Vegetarian Recipes" alt="Vegetarian Recipes">Vegetarian Recipes</a>
          <ul class="third-level">
            <li>
              <a href="/pages/recipes/main-ingredients/meat/" title="Meat Recipes" alt="Meat Recipes">Meat Recipes</a>
            </li>
            <li>
              <a href="/pages/recipes/main-ingredients/poultry/" title="Poultry Recipes" alt="Poultry Recipes">Poultry Recipes</a>
            </li>
            <!-- Add more fly-out items here as needed -->
          </ul>
        </li>
      {% else %}
        {{ renderNavListItem(entry) }}
      {% endif %}
    {% endfor %}
  </ul>
</nav>
